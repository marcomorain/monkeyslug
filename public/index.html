<!doctype html>

<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>monkeyslug</title>
    <link rel=stylesheet href="style.css" type="text/css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.2/underscore-min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-url-parser/2.2.1/purl.min.js"></script>
    <script type="text/javascript" src="gl-matrix-min.js"></script>
    
    <script id="shader-vs" type="x-shader/x-vertex">
        attribute vec3 aVertexPosition;
        attribute vec3 aVertexNormal;
        attribute vec3 aVertexColor;

        uniform mat4 uMVMatrix;
        uniform mat4 uPMatrix;
        uniform mat4 uNormalMatrix;
        uniform vec3 uAmbientColor;

        varying vec3 vLighting;
        varying vec3 vColor;
        varying vec4 vTransformedNormal;
        varying vec4 vPosition;

        void main(void) {
            vPosition = uMVMatrix * vec4(aVertexPosition, 1.0);
            gl_Position = uPMatrix * vPosition;
            vTransformedNormal = uNormalMatrix * vec4(aVertexNormal, 1.0);
            vColor             = aVertexColor;

        }
    </script>
    
    <script id="shader-fs" type="x-shader/x-fragment">
        precision mediump float;
        varying vec3 vLighting;
        varying vec3 vColor;
        varying vec4 vTransformedNormal;
        varying vec4 vPosition;
        uniform vec3 uPointLightingLocation;
        uniform vec3 uPointLightingColor;
        uniform vec3 uAmbientColor;

        void main(void) {
          
            vec4 lightDirection = vec4(normalize(uPointLightingLocation - vPosition.xyz), 1);
            float directionalLightWeighting = max(dot(normalize(vTransformedNormal), lightDirection), 0.0);
            vec3 lightWeighting = uAmbientColor + uPointLightingColor * directionalLightWeighting;
            
            gl_FragColor = vec4(lightWeighting, 1);
        }
    </script>
    
    <script src="screen.js"></script>
    <script src="client.js"></script>
  </head>
  <body>
    <canvas id="game" width="640" height="480"></canvas>
    <input id="fullscreen" type="submit" value="Enter Fullscreen" />
  </body>
</html>
