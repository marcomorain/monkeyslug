<!doctype html>

<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>monkeyslug</title>
    <link rel=stylesheet href="style.css" type="text/css">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js"></script>
    <script type="text/javascript" src="gl-matrix-min.js"></script>
    
    <script id="shader-fs" type="x-shader/x-fragment">
        precision mediump float;
        varying vec3 vColor;

        void main(void) {
            gl_FragColor = vec4(vColor, 1);
        }
    </script>
    <script id="shader-vs" type="x-shader/x-vertex">
        attribute vec3 aVertexPosition;
        attribute vec3 aVertexNormal;
        attribute vec3 aVertexColor;

        uniform mat4 uMVMatrix;
        uniform mat4 uPMatrix;
        uniform mat4 uNormalMatrix;

        varying vec3 vLighting;
        varying vec3 vColor;

        void main(void) {
            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
            
            // Apply lighting effect

            vec3 ambientLight = vec3(0.6, 0.6, 0.6);
            vec3 directionalLightColor = vec3(0.5, 0.5, 0.75);
            vec3 directionalVector = vec3(0.85, 0.8, 0.75);

            vec4 transformedNormal = uNormalMatrix * vec4(aVertexNormal, 0);

            float directional = max(dot(transformedNormal.xyz, directionalVector), 0.0);
            vLighting = ambientLight + (directionalLightColor * directional * vec3(0.3, 0.3, 0.3));
            vColor    = aVertexColor;

        }
    </script>
    
    <script src="client.js"></script>
  </head>
  <body>
    <canvas id="game" width="640" height="480"></canvas>
    <input id="fullscreen" type="submit" value="Enter Fullscreen" />
  </body>
</html>
